<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>online shopping</title>
    <link rel="stylesheet" href="./style.css" />
    <link rel="stylesheet" href="./navbar.css" />
    <script src="./data.jss"></script>
  </head>
  <body>
    <div class="container">
      <!-- navbar -->
      <!-- <div class="navbar">
        <div class="left">
          <h1><a href="./">Vastralaya</a></h1>
        </div>
        <div class="right">
          <ul>
            <li>
              <a href="#">Profile</a>
            </li>
            <li>
              <a href="./cart.html">Cart</a>
            </li>
            <li>
              <a href="#">Login</a>
            </li>
          </ul>
        </div>
      </div> -->
      <div id="container_items"></div>
    </div>
  </body>
</html>
<script type="module">
  // navbar

  let nav = document.createElement("div");
  nav.setAttribute("class", "navBar");

  let leftNav = document.createElement("h1");
  leftNav.innerText = "vastralaya";
  leftNav.setAttribute("a", "href");

  let rightNav = document.createElement("div");
  rightNav.setAttribute("class", "right");

  let unorderList = document.createElement("ul");

  let listItem = document.createElement("li");
  listItem.setAttribute("a", "href");
  listItem.innerText = "profile";

  let listItem2 = document.createElement("li");
  listItem2.setAttribute("a", "href");
  listItem2.innerText = "cart";

  let listItem3 = document.createElement("li");
  listItem3.setAttribute("a", "href");
  listItem3.innerText = "login";

  nav.append(leftNav, rightNav, listItem, listItem2, listItem3);

  import { ecomData } from "./data.js";

  ecomData.map(function (ele, idx, array) {
    let container_items = document.getElementById("container_items");

    let cards = document.createElement("div");
    cards.setAttribute("class", "cards");

    let contentDiv = document.createElement("div");
    contentDiv.setAttribute("class", "contentDiv");

    let imgDiv = document.createElement("div");
    imgDiv.setAttribute("class", "imgDiv");

    let imgTag = document.createElement("img");
    imgTag.setAttribute("src", ele.image);

    imgDiv.append(imgTag);

    let brandName = document.createElement("h2");
    brandName.innerText = ele.brandName;
    brandName.setAttribute("class", "brandName");

    let type = document.createElement("h4");
    type.innerText = ele.type;
    type.setAttribute("class", "type");

    let price = document.createElement("p");
    price.innerText = ele.price;
    price.setAttribute("class", "price");

    let addToCart = document.createElement("button");
    addToCart.innerText = "Add";
    addToCart.setAttribute("class", "addButton");
    addToCart.addEventListener("click", function () {
      handleAddToCart(ele);
    });

    let wishlistBtn = document.createElement("button");
    wishlistBtn.innerText = "ðŸ’–";
    wishlistBtn.setAttribute("class", "wishlist");

    let btnDiv = document.createElement("div");
    btnDiv.setAttribute("class", "btnDiv");

    btnDiv.append(wishlistBtn, addToCart);

    contentDiv.append(brandName, type, price, btnDiv);

    cards.append(imgDiv, contentDiv);

    container_items.append(cards);
  });

  function handleAddToCart(ele) {
    let cartData = JSON.parse(localStorage.getItem("cartData")) || [];

    let existingData = cartData.find(function (element) {
      return element.id === ele.id;
    });

    if (existingData) {
      existingData.count++;
    } else {
      cartData.push(ele);
    }

    localStorage.setItem("cartData", JSON.stringify(cartData));
  }
</script>
